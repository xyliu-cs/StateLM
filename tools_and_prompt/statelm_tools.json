[
  {
    "type": "function",
    "function": {
      "name": "analyzeText",
      "description": "Analyze the length of the attached context.",
      "parameters": { "type": "object", "properties": {} }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "loadDocument",
      "description": "Load the full document.",
      "parameters": { "type": "object", "properties": {} }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "buildIndex",
      "description": "Split the document into fixed-size chunks and build a searchable index.",
      "parameters": {
        "type": "object",
        "properties": {
          "chunk_size": { "type": "integer", "description": "Chunk size in tokens. Default 4000." },
          "overlap": { "type": "integer", "description": "Number of overlapping tokens between adjacent chunks. Default 0." }
        }
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "checkBudget",
      "description": "Check the remaining context budget.",
      "parameters": { "type": "object", "properties": {} }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "readChunk",
      "description": "Retrieve the full text of a document chunk. The chunk can be specified explicitly by chunk_id, or retrieved sequentially using scan mode.",
      "parameters": {
        "type": "object",
        "properties": {
          "chunk_id": {
            "type": "integer",
            "description": "ID of the chunk to retrieve. Required when enable_scan is false. Ignored when enable_scan is true."
          },
          "enable_scan": {
            "type": "boolean",
            "description": "If true, enables sequential scan mode. The function returns the next chunk after the most recently retrieved chunk in the current conversation. Scan mode persists across subsequent calls unless disabled. Default is false."
          }
        }
      }
    }
  },  
  {
    "type": "function",
    "function": {
      "name": "searchEngine",
      "description": "Search the document by keywords and return the information of relevant chunks.",
      "parameters": {
        "type": "object",
        "properties": {
          "keyword": { "type": "string", "description": "Keyword(s) separated with comma." }
        },
        "required": ["keyword"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "note",
      "description": "Record key information in a note.",
      "parameters": {
        "type": "object",
        "properties": {
          "key": { "type": "string", "description": "Unique identifier for the note." },
          "summary": { "type": "string", "description": "Short summary of the note." },
          "content": { 
            "type": "object", 
            "description": "Full note content." 
          }
        },
        "required": ["key", "summary", "content"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "readNote",
      "description": "Read the full content of a specified note.",
      "parameters": {
        "type": "object",
        "properties": {
          "key": { "type": "string", "description": "Note key." }
        },
        "required": ["key"]
      }
      }
  },
  {
    "type": "function",
    "function": {
      "name": "updateNote",
      "description": "Overwrite/Append/Delete an existing note.",
      "parameters": {
        "type": "object",
        "properties": {
          "mode": { "type": "string", "description": "'append', 'overwrite', or 'delete'." },
          "key": { "type": "string", "description": "Key of the target note to update." },
          "new_content": { "type": "object", "description": "New content for update. Leave empty for deletion mode." },
          "new_summary": { "type": "string", "description": "New summary for update." }
        },
        "required": ["key", "mode", "new_content"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "deleteContext",
      "description": "Delete an assistant or tool message by its message ID to save tokens.",
      "parameters": {
        "type": "object",
        "properties": {
          "msg_id": { "type": "integer", "description": "Unique ID of the message to prune." }
        },
      "required": ["msg_id"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "finish",
      "description": "Submit the final answer.",
      "parameters": {
        "type": "object",
        "properties": {
          "answer": { 
            "type": "string", 
            "description": "Final answer in short form." 
          }
        },
        "required": ["answer"]
      }
    }
  }
]